<!--
If not stated otherwise in this file or this component's Licenses.txt file the
following copyright and licenses apply:
Copyright 2024 RDK Management
Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->

<div class="container-fluid">
    <div class="row borders-btm">
        <div class="col">
        </div>
        <div class="col">
            <h1 class="title"><h1 class="title">Create {{selectedCategoryName}} Script</h1></h1>
        </div>
        <div class="col">
        </div>
    </div>
    <div class="row mt-1">
        <div class="col-md-12">
                <mat-horizontal-stepper class="demo-stepper" [linear]="isLinear" #stepper>
                    <mat-step [stepControl]="firstFormGroup">
                        <form [formGroup]="firstFormGroup" >
                            <ng-template matStepLabel>Script Details</ng-template>
                            <div class="row mt-2 row-align">
                                <div class="col">
                                    <div class="row mb-3">
                                        <label for="scriptname" class="col-md-3 col-form-label">Script Name<span
                                                style="color:red; margin-left: 0.75em;">*</span></label>
                                        <div class="col-md-8">
                                            <input type="text" class="form-control" id="scriptname" autocomplete="off"
                                                placeholder="Enter script name" formControlName="scriptname" (input)="onScritName($event)">
                                        </div>
                                    </div>
                                    <div class="row mb-3">
                                        <label for="module" class="col-md-3 col-form-label">
                                            Module<span style="color:red; margin-left: 0.75em;">*</span>
                                        </label>
                                        <div class="col-md-8">
                                            <select class="form-select" aria-label="Default select example" id="module"
                                                formControlName="module" (change)="getSelectedModule($event)">
                                                <option value="" default>Select</option>
                                                <option *ngFor="let item of allModules" [value]="item.moduleName">
                                                    {{ item.moduleName }}
                                                </option>
                                            </select>
                                        </div>
                                    </div>

                                    <div class="row mb-3">
                                        <label for="primitivetest" class="col-md-3 col-form-label">Primitive Test</label>
                                        <div class="col-md-8">
                                            <select class="form-select" aria-label="Default select example"
                                                id="primitiveTest" formControlName="primitiveTest" (change)="onChangePrimitive($event)">
                                                <!-- <option value="" default>Select</option> -->
                                                <option *ngFor="let item of allPrimitiveTest" [value]="item.primitiveTestName">
                                                    {{ item.primitiveTestName }}
                                                </option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="row mb-3">
                                        <label for="longtest" class="col-md-3 col-form-label">Long duration test</label>
                                        <div class="col-md-8 check-thunder">
                                            <div class="form-check form-check-inline form-check-reverse longtest">
                                                <input class="form-check-input thunder" type="checkbox" id="longtest"
                                                    formControlName="longdurationtest" (change)="longDuration($event)">
                                            </div>
                                        </div>
                                        <label for="skipexecution" class="col-md-3 col-form-label">Skip
                                            Execution</label>
                                        <div class="col-md-8 check-thunder">
                                            <div class="form-check form-check-inline form-check-reverse longtest">
                                                <input class="form-check-input thunder" type="checkbox"
                                                    id="skipexecution" formControlName="skipexecution" (change)="skipExecution($event)">
                                            </div>
                                        </div>

                                    </div>
                                </div>
                                <div class="col">
                                    <div class="row mb-3">
                                        <label for="devicetype" class="col-md-3 col-form-label">Device Type<span
                                                style="color:red; margin-left: 0.75em;">*</span></label>
                                        <div class="col-md-8">
                                            <ng-multiselect-dropdown #multiSelect id="subBoxtypelist"
                                            [placeholder]="'Select an option'" [settings]="deviceTypeSettings"
                                            [data]="allDeviceType" formControlName="devicetype" (onSelect)="onItemSelect($event)" (onDeSelect)="onDeSelect($event)" 
                                            (onSelectAll)="onSelectAll($event)" (onDeSelectAll)="onDeSelectAll($event)">
                                           </ng-multiselect-dropdown>
                                        </div>
                                    </div>

                                    <div class="row mb-3">
                                        <label for="executiontimeout" class="col-md-3 col-form-label">Execution
                                            TimeOut(minutes)<span style="color:red; margin-left: 0.75em;">*</span></label>
                                        <div class="col-md-8">
                                            <input inputmode="numeric" oninput="this.value = this.value.replace(/\D+/g, '')" class="form-control" id="executiontimeout"
                                                autocomplete="off" placeholder="Enter execution timeout (min)"
                                                formControlName="executiontimeout">
                                        </div>
                                    </div>

                                    <div class="row mb-3">
                                        <label for="synopsis" class="col-md-3 col-form-label">Synopsis<span
                                                style="color:red; margin-left: 0.75em;">*</span></label>
                                        <div class="col-md-8">
                                            <textarea class="form-control" id="synopsis" rows="3"
                                                formControlName="synopsis" (input)="onInput($event)"></textarea>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="text-end">
                                <button mat-button matStepperPrevious class="reset-btn" (click)="goBack()">Back</button>
                                <button mat-button matStepperNext class="reset-btn next-btn" [disabled]="!firstFormGroup.valid" >Next</button>
                            </div>
                        </form>
                    </mat-step>
                    <mat-step [stepControl]="secondFormGroup" label="Test Case Details">
                        <form [formGroup]="secondFormGroup">
                            <div class="row mt-2">
                                <div class="col">
                                    <div class="row mb-3">
                                        <label for="testId" class="col-md-3 col-form-label">Test Case ID<span
                                                style="color:red; margin-left: 0.75em;">*</span></label>
                                        <div class="col-md-8">
                                            <input type="text" class="form-control" id="testId" autocomplete="off"
                                                placeholder="Enter test case ID" formControlName="testcaseID" (input)="onTestcaseID($event)">
                                        </div>
                                    </div>

                                    <div class="row mb-3">
                                        <label for="testobjective" class="col-md-3 col-form-label">Test Objective<span
                                                style="color:red; margin-left: 0.75em;">*</span></label>
                                        <div class="col-md-8">
                                            <textarea class="form-control" id="testobjective" rows="3"
                                                formControlName="testObjective" (input)="onTestObjective($event)"></textarea>
                                        </div>
                                    </div>
                                    <div class="row mb-3">
                                        <label for="parameters" class="col-md-3 col-form-label">Input Parameters<span
                                                style="color:red; margin-left: 0.75em;">*</span></label>
                                        <div class="col-md-8">
                                            <textarea class="form-control" id="parameters" rows="3"
                                                formControlName="inputParameters" (input)="onInputParameters($event)"></textarea>
                                        </div>
                                    </div>
                                    <div class="row mb-3">
                                        <label for="approach" class="col-md-3 col-form-label">Automation Approach<span
                                                style="color:red; margin-left: 0.75em;">*</span></label>
                                        <div class="col-md-8 ">
                                            <textarea class="form-control" id="approach" rows="3"
                                                formControlName="automationApproach" (input)="onAutomationApproach($event)"></textarea>
                                        </div>
                                    </div>
                                    <div class="row mb-3">
                                        <label for="priority" class="col-md-3 col-form-label">Priority<span
                                                style="color:red; margin-left: 0.75em;">*</span></label>
                                        <div class="col-md-8">
                                            <select class="form-select" aria-label="Default select example"
                                                id="priority" formControlName="priority" (change)="changePriority($event)">
                                                <option value="" default>Select</option>
                                                <option value="High">High</option>
                                                <option value="Medium">Medium</option>
                                                <option value="Low">Low</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="row mb-3">
                                        <label for="teststub" class="col-md-3 col-form-label">Test Stub<span
                                                style="color:red; margin-left: 0.75em;">*</span></label>
                                        <div class="col-md-8">
                                            <textarea class="form-control" id="teststub" rows="3"
                                                formControlName="testStub" (input)="onTestStub($event)"></textarea>
                                        </div>
                                    </div>

                                </div>
                                <div class="col">
                                    <div class="row mb-3">
                                        <label for="testtype" class="col-md-3 col-form-label">Test Type<span
                                                style="color:red; margin-left: 0.75em;">*</span></label>
                                        <div class="col-md-8">
                                            <select class="form-select" aria-label="Default select example"
                                                id="testtype" formControlName="testType">
                                                <option value="" default>Select</option>
                                                <option value="POSITIVE">POSITIVE</option>
                                                <option value="NEGATIVE">NEGATIVE</option>
                                            </select>
                                        </div>
                                    </div>
                  
                                    <div class="row mb-3">
                                        <label for="interface" class="col-md-3 col-form-label">RDK Interface<span
                                                style="color:red; margin-left: 0.75em;">*</span></label>
                                        <div class="col-md-8">
                                            <textarea class="form-control" id="interface" rows="3"
                                                formControlName="rdkInterface" (input)="onInterface($event)"></textarea>
                                        </div>
                                    </div>
                                    <div class="row mb-3">
                                        <label for="output" class="col-md-3 col-form-label">Expected Output<span
                                                style="color:red; margin-left: 0.75em;">*</span></label>
                                        <div class="col-md-8">
                                            <textarea class="form-control" id="output" rows="3"
                                                formControlName="expectedOutput" (input)="onExpectedOutput($event)"></textarea>
                                        </div>
                                    </div>
                                    <div class="row mb-3">
                                        <label for="testpre" class="col-md-3 col-form-label">Test Pre-requisites</label>
                                        <div class="col-md-8">
                                            <textarea class="form-control" id="testpre" rows="3"
                                                formControlName="testPreRequisites"></textarea>
                                        </div>
                                    </div>
                            
                                    <div class="row mb-3">
                                        <label for="remarks" class="col-md-3 col-form-label">Remarks</label>
                                        <div class="col-md-8">
                                            <input type="text" class="form-control" id="remarks" autocomplete="off"
                                                placeholder="Enter remarks" formControlName="remarks">
                                        </div>
                                    </div>
                                    <div class="row mb-3">
                                        <label for="releaseVersion" class="col-md-3 col-form-label">Update Release
                                            Version</label>
                                        <div class="col-md-8">
                                            <input type="text" class="form-control" id="releaseVersion"
                                                autocomplete="off" placeholder="Enter update release version"
                                                formControlName="releaseVersion">
                                        </div>
                                    </div>
                                </div>

                            </div>
                            <div class="text-end">
                                <button mat-button matStepperPrevious class="reset-btn">Back</button>
                                <button mat-button matStepperNext class="reset-btn next-btn" [disabled]="!secondFormGroup.valid"
                                    >Next</button>
                            </div>
                        </form>
                    </mat-step>
                    <mat-step [stepControl]="thirdFormGroup" label="Script">
                        <form [formGroup]="thirdFormGroup" >
                            <label for="scriptcontent" class="col-md-3 col-form-label ">Script Content</label>
                            <div class="row">
                                <div style="height: 400px;">
                                    <ngx-monaco-editor [options]="editorOptions" [(ngModel)]="sampleFile"
                                        formControlName="pythonEditor">
                                    </ngx-monaco-editor>
                                </div>
                            </div>
                            <div class="mt-2 text-end">
                                <button mat-button matStepperPrevious class="reset-btn">Back</button>
                                <button mat-button type="submit" (click)="onSubmit()"  class="reset-btn">Submit</button>
                            </div>
                        </form>

                    </mat-step>
                </mat-horizontal-stepper>
        </div>
    </div>
</div>